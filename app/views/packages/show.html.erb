<%- model_class = Package -%>
<div class="page-header" xmlns="http://www.w3.org/1999/html">
  <h1><%=t '.title', :default => model_class.model_name.human %></h1>
</div>

<dl class="dl-horizontal">
  <ul class="media-list">
    <li class="media">
      <a class="pull-left" href="#">
        <img class="media-object" data-src="holder.js/64x64">
      </a>
      <div class="media-body">
        <h4 class="media-heading"><%= @package.name %></h4>
        <%= @package.fxml %>
      </div>
    </li>
    <% @package.assets.each do |asset| %>
        <!-- Nested media object -->
        <li class="media">
          <%= render_media_as_thumbnail asset %>
        </li>
    <% end %>
  </ul>

  <div id="assets" style="position: relative; margin-left: 8em;">

  </div>

</dl>


<!--script id="assetTemplate" type="media-jfx/template">
  <strong>{{asset_name}}:</strong><br/>
  <img src="{{image_url}}" >
  <br/><br/>
</script-->

<!--script>

    template = $.trim($('#assetTemplate').html());
    console.log(template);
    var url = "<%#=(URI.parse(root_url).to_s)[0...-1] %>";
    console.log(url);
    var frag = '';
    $.each(<%#= @package.assets.to_json.html_safe %>, function(index, obj)
    {
       console.log(obj);
       frag += template.replace(/{{asset_name}}/ig, obj.name)
                        .replace(/{{image_url}}/ig, url + obj.asset_file.url);
                console.log(frag);
    });
    $('#assets').append(frag);
</script-->


<div class="form-actions">
  <%= link_to t('.back', :default => t("helpers.links.back")),
              packages_path, :class => 'btn'  %>
  <%= link_to t('.edit', :default => t("helpers.links.edit")),
              edit_package_path(@package), :class => 'btn' %>
  <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
              package_path(@package),
              :method => 'delete',
              :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
              :class => 'btn btn-danger' %>
</div>
